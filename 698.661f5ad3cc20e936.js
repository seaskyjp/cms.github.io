"use strict";(self.webpackChunkseaskyCMS=self.webpackChunkseaskyCMS||[]).push([[698],{3698:(j,y,i)=>{i.r(y),i.d(y,{HomeModule:()=>a});var z=i(4755),o=i(1195),v=i(5861),d=i(5030),B=i(9751),b=i(2340),n=i(2223),h=i(131),u=i(3272),_=i(8397),C=i(4259),x=i(2242),D=i(4247),A=i(4839),E=i(6681),P=i(1929),g=i(4701),M=i(2701),O=i(3068),T=i(8942);function H(l,p){if(1&l){const r=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){n.CHM(r);const m=n.oxw();return n.KtG(m.edit())}),n._uU(1,"\u7de8\u96c6"),n.qZA()}}function I(l,p){if(1&l){const r=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){n.CHM(r);const m=n.oxw();return n.KtG(m.cancel())}),n._uU(1,"\u30ad\u30e3\u30f3\u30bb\u30eb"),n.qZA()}}function S(l,p){if(1&l&&(n.ynx(0),n._UZ(1,"span",22),n.TgZ(2,"div",23),n._uU(3,"Upload"),n.qZA(),n.BQk()),2&l){const r=n.oxw();n.xp6(1),n.Q6J("nzType",r.isImgLoading?"loading":"plus")}}function Z(l,p){if(1&l&&n._UZ(0,"img",24),2&l){const r=n.oxw();n.Q6J("src",r.form.value.img,n.LSH)}}const U=function(){return[".png",".jpg"]},e=[{path:"",component:(()=>{class l{constructor(r,s,m,f,N){this.router=r,this.route=s,this.supabase=m,this.message=f,this.fb=N,this.id="",this.isLoading=!1,this.isImgLoading=!1,this.isEdit=!1,this.transformFile=R=>new B.y(Y=>{const L=new FileReader;L.readAsDataURL(R),this.uploadImages(R),L.onload=()=>{const K=document.createElement("canvas"),J=document.createElement("img");J.src=L.result,J.onload=()=>{const F=K.getContext("2d");F.drawImage(J,0,0),F.fillStyle="red",F.textBaseline="middle",F.fillText("Ant Design",20,20),K.toBlob(W=>{Y.next(W),Y.complete()})}}})}ngOnInit(){this.id="1",this.form=this.fb.group({id:[null],created_at:[null],updated_at:[null],title:[null,[d.kI.required]],subTitle:[null,[d.kI.required]],img:[null,[d.kI.required]]}),this.cancel(),this.id&&this.getDetails(+this.id)}getDetails(r){var s=this;return(0,v.Z)(function*(){s.isLoading=!0;const{data:m,error:f}=yield s.supabase.get("home1",r,!0);f&&s.message.error(f.message),console.log(m),s.form.setValue({...m}),s.isLoading=!1})()}edit(){this.isEdit=!0,this.form.controls.title.enable(),this.form.controls.subTitle.enable()}cancel(){this.isEdit=!1,this.form.controls.title.disable(),this.form.controls.subTitle.disable()}submitForm(){var r=this;return(0,v.Z)(function*(){if(r.form.valid){console.log(r.form.value);const{error:s}=yield r.supabase.upsert("home1",r.form.value);s?r.message.error(s.message):(r.message.success("Success"),r.cancel())}else Object.values(r.form.controls).forEach(s=>{s.invalid&&(s.markAsDirty(),s.updateValueAndValidity({onlySelf:!0}))})})()}uploadImages(r){var s=this;return(0,v.Z)(function*(){const m=r.name.split(".").pop(),f=`${Math.random()}.${m}`;s.isImgLoading=!0;const{error:N}=yield s.supabase.uploadImages(f,r);N&&s.message.error(N.message),s.form.value.img=`${b.N.storageUrl}${f}`,s.form.setValue({...s.form.value}),s.isImgLoading=!1})()}}return l.\u0275fac=function(r){return new(r||l)(n.Y36(o.F0),n.Y36(o.gz),n.Y36(h.T),n.Y36(u.dD),n.Y36(d.QS))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-home"]],decls:33,vars:27,consts:[["nzHeader","\u4f8b","nzActive","false"],["src","assets/img/home.png",2,"width","100%","height","auto"],["nzHeader","\u30c7\u30fc\u30bf","nzActive","true"],[3,"nzSpinning"],[1,"header-wrap"],[1,"header-title"],["class","header-button","nz-button","","nzType","primary",3,"click",4,"ngIf"],[1,"content-wrap"],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","title","id","title"],["nzRequired","","nzFor","subTitle",3,"nzSm","nzXs"],["nz-input","","formControlName","subTitle","id","subTitle"],["nzRequired","","nzFor","img",3,"nzSm","nzXs"],["nzListType","picture-card",1,"uploader",3,"nzDisabled","nzShowUploadList","nzAccept","nzTransformFile"],[4,"ngIf"],["style","width: 100%",3,"src",4,"ngIf"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled","nzLoading"],["nz-button","","nzType","primary",1,"header-button",3,"click"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"ant-upload-text"],[2,"width","100%",3,"src"]],template:function(r,s){1&r&&(n.TgZ(0,"nz-collapse")(1,"nz-collapse-panel",0),n._UZ(2,"img",1),n.qZA(),n.TgZ(3,"nz-collapse-panel",2)(4,"nz-spin",3)(5,"div",4),n._UZ(6,"div",5),n.YNc(7,H,2,0,"button",6),n.YNc(8,I,2,0,"button",6),n.qZA(),n._UZ(9,"nz-divider"),n.TgZ(10,"div",7)(11,"form",8),n.NdJ("ngSubmit",function(){return s.submitForm()}),n.TgZ(12,"nz-form-item")(13,"nz-form-label",9),n._uU(14,"Title"),n.qZA(),n.TgZ(15,"nz-form-control",10),n._UZ(16,"input",11),n.qZA()(),n.TgZ(17,"nz-form-item")(18,"nz-form-label",12),n._uU(19,"Sub Title"),n.qZA(),n.TgZ(20,"nz-form-control",10),n._UZ(21,"input",13),n.qZA()(),n.TgZ(22,"nz-form-item")(23,"nz-form-label",14),n._uU(24,"Image"),n.qZA(),n.TgZ(25,"nz-form-control",10)(26,"nz-upload",15),n.YNc(27,S,4,1,"ng-container",16),n.YNc(28,Z,1,1,"img",17),n.qZA()()(),n.TgZ(29,"nz-form-item",18)(30,"nz-form-control",19)(31,"button",20),n._uU(32,"\u4fdd\u5b58"),n.qZA()()()()()()()()),2&r&&(n.xp6(4),n.Q6J("nzSpinning",s.isLoading),n.xp6(3),n.Q6J("ngIf",!s.isEdit),n.xp6(1),n.Q6J("ngIf",s.isEdit),n.xp6(3),n.Q6J("formGroup",s.form),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(3),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(1),n.Q6J("nzDisabled",!s.isEdit)("nzShowUploadList",!1)("nzAccept",n.DdM(26,U))("nzTransformFile",s.transformFile),n.xp6(1),n.Q6J("ngIf",!s.form.value.img),n.xp6(1),n.Q6J("ngIf",s.form.value.img),n.xp6(2),n.Q6J("nzSpan",14)("nzOffset",6),n.xp6(1),n.Q6J("disabled",!s.isEdit)("nzLoading",s.isLoading||s.isImgLoading))},dependencies:[z.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,_.Zp,C.ix,x.w,D.dQ,A.g,E.W,P.t3,P.SK,g.Lr,g.Nx,g.iK,g.Fd,M.Ls,O.FY,T.Zv,T.yH]}),l})()}];let c=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[o.Bz.forChild(e),o.Bz]}),l})();var t=i(3247);let a=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[z.ez,c,d.UX,_.o7,C.sL,A.S,t.HQ,E.j,g.U5,M.PV,O.cS,d.u5,T.cD]}),l})()},8942:(j,y,i)=>{i.d(y,{Zv:()=>U,cD:()=>Q,yH:()=>S});var z=i(7582),o=i(2223),v=i(4968),d=i(2722),B=i(9300),b=i(7169),n=i(9436),h=i(8982),u=i(4780),_=i(8930),C=i(6760),x=i(4755),D=i(2701),A=i(2643);const E=["*"],P=["collapseHeader"];function g(e,c){if(1&e&&(o.ynx(0),o._UZ(1,"span",7),o.BQk()),2&e){const t=c.$implicit,a=o.oxw(2);o.xp6(1),o.Q6J("nzType",t||"right")("nzRotate",a.nzActive?90:0)}}function M(e,c){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,g,2,2,"ng-container",3),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzExpandedIcon)}}function O(e,c){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const t=o.oxw();o.xp6(1),o.Oqu(t.nzHeader)}}function T(e,c){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Oqu(t.nzExtra)}}function H(e,c){if(1&e&&(o.TgZ(0,"div",8),o.YNc(1,T,2,1,"ng-container",3),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzExtra)}}const I="collapse";let S=(()=>{class e{constructor(t,a,l,p){this.nzConfigService=t,this.cdr=a,this.directionality=l,this.destroy$=p,this._nzModuleName=I,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(I).pipe((0,d.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,d.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(t){this.listOfNzCollapsePanelComponent.push(t)}removePanel(t){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(t),1)}click(t){this.nzAccordion&&!t.nzActive&&this.listOfNzCollapsePanelComponent.filter(a=>a!==t).forEach(a=>{a.nzActive&&(a.nzActive=!1,a.nzActiveChange.emit(a.nzActive),a.markForCheck())}),t.nzActive=!t.nzActive,t.nzActiveChange.emit(t.nzActive)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.jY),o.Y36(o.sBO),o.Y36(_.Is,8),o.Y36(h.kn))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(t,a){2&t&&o.ekj("ant-collapse-icon-position-left","left"===a.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===a.nzExpandIconPosition)("ant-collapse-ghost",a.nzGhost)("ant-collapse-borderless",!a.nzBordered)("ant-collapse-rtl","rtl"===a.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[o._Bn([h.kn])],ngContentSelectors:E,decls:1,vars:0,template:function(t,a){1&t&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),(0,z.gn)([(0,n.oS)(),(0,u.yF)()],e.prototype,"nzAccordion",void 0),(0,z.gn)([(0,n.oS)(),(0,u.yF)()],e.prototype,"nzBordered",void 0),(0,z.gn)([(0,n.oS)(),(0,u.yF)()],e.prototype,"nzGhost",void 0),e})();const Z="collapsePanel";let U=(()=>{class e{markForCheck(){this.cdr.markForCheck()}constructor(t,a,l,p,r,s){this.nzConfigService=t,this.ngZone=a,this.cdr=l,this.destroy$=p,this.nzCollapseComponent=r,this.noAnimation=s,this._nzModuleName=Z,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new o.vpe,this.nzConfigService.getConfigChangeEventForComponent(Z).pipe((0,d.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,v.R)(this.collapseHeader.nativeElement,"click").pipe((0,B.h)(()=>!this.nzDisabled),(0,d.R)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.jY),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(h.kn),o.Y36(S,1),o.Y36(C.P,8))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nz-collapse-panel"]],viewQuery:function(t,a){if(1&t&&o.Gf(P,7),2&t){let l;o.iGM(l=o.CRH())&&(a.collapseHeader=l.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(t,a){2&t&&o.ekj("ant-collapse-no-arrow",!a.nzShowArrow)("ant-collapse-item-active",a.nzActive)("ant-collapse-item-disabled",a.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[o._Bn([h.kn])],ngContentSelectors:E,decls:8,vars:8,consts:[["role","button",1,"ant-collapse-header"],["collapseHeader",""],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(t,a){1&t&&(o.F$t(),o.TgZ(0,"div",0,1),o.YNc(2,M,2,1,"div",2),o.YNc(3,O,2,1,"ng-container",3),o.YNc(4,H,2,1,"div",4),o.qZA(),o.TgZ(5,"div",5)(6,"div",6),o.Hsn(7),o.qZA()()),2&t&&(o.uIk("aria-expanded",a.nzActive),o.xp6(2),o.Q6J("ngIf",a.nzShowArrow),o.xp6(1),o.Q6J("nzStringTemplateOutlet",a.nzHeader),o.xp6(1),o.Q6J("ngIf",a.nzExtra),o.xp6(1),o.ekj("ant-collapse-content-active",a.nzActive),o.Q6J("@.disabled",!(null==a.noAnimation||!a.noAnimation.nzNoAnimation))("@collapseMotion",a.nzActive?"expanded":"hidden"))},dependencies:[x.O5,D.Ls,A.f],encapsulation:2,data:{animation:[b.J_]},changeDetection:0}),(0,z.gn)([(0,u.yF)()],e.prototype,"nzActive",void 0),(0,z.gn)([(0,u.yF)()],e.prototype,"nzDisabled",void 0),(0,z.gn)([(0,n.oS)(),(0,u.yF)()],e.prototype,"nzShowArrow",void 0),e})(),Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[_.vT,x.ez,D.PV,A.T,C.g]}),e})()}}]);