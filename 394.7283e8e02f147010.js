"use strict";(self.webpackChunkseaskyCMS=self.webpackChunkseaskyCMS||[]).push([[394],{394:(j,N,i)=>{i.r(N),i.d(N,{EditSolutionModule:()=>O});var g=i(4755),t=i(1195),A=i(5861),c=i(5030),U=i(9751),B=i(2340),n=i(2223),S=i(131),f=i(3272),x=i(8397),y=i(1401),F=i(2242),J=i(4247),T=i(4839),P=i(6681),L=i(1929),v=i(4701),Q=i(2701),R=i(3068),w=i(3355),M=i(8942);function Y(r,z){if(1&r&&(n.ynx(0),n._UZ(1,"span",20),n.TgZ(2,"div",21),n._uU(3,"Upload"),n.qZA(),n.BQk()),2&r){const s=n.oxw();n.xp6(1),n.Q6J("nzType",s.loading?"loading":"plus")}}function H(r,z){if(1&r&&n._UZ(0,"img",22),2&r){const s=n.oxw();n.Q6J("src",s.avatarUrl,n.LSH)}}function b(r,z){if(1&r&&(n.ynx(0),n._UZ(1,"span",20),n.TgZ(2,"div",21),n._uU(3,"Upload"),n.qZA(),n.BQk()),2&r){const s=n.oxw();n.xp6(1),n.Q6J("nzType",s.isImgLoading?"loading":"plus")}}function K(r,z){if(1&r&&n._UZ(0,"img",22),2&r){const s=n.oxw();n.Q6J("src",s.form.value.img,n.LSH)}}const $=function(){return[".png",".jpg"]},d=[{path:"",component:(()=>{class r{constructor(s,o,p,m,C){this.router=s,this.route=o,this.supabase=p,this.message=m,this.fb=C,this.id="",this.isLoading=!1,this.isImgLoading=!1,this.desc="",this.details="",this.loading=!1,this.transformFile=D=>new U.y(I=>{const _=new FileReader;_.readAsDataURL(D),this.uploadImages(D),_.onload=()=>{const Z=document.createElement("canvas"),E=document.createElement("img");E.src=_.result,E.onload=()=>{const u=Z.getContext("2d");u.drawImage(E,0,0),u.fillStyle="red",u.textBaseline="middle",u.fillText("Ant Design",20,20),Z.toBlob(X=>{I.next(X),I.complete()})}}}),this.transformFileSec=D=>new U.y(I=>{const _=new FileReader;_.readAsDataURL(D),this.uploadImagesSec(D),_.onload=()=>{const Z=document.createElement("canvas"),E=document.createElement("img");E.src=_.result,E.onload=()=>{const u=Z.getContext("2d");u.drawImage(E,0,0),u.fillStyle="red",u.textBaseline="middle",u.fillText("Ant Design",20,20),Z.toBlob(X=>{I.next(X),I.complete()})}}})}ngOnInit(){this.id=this.route.snapshot.params.id||"",this.form=this.fb.group({id:[null],created_at:[null],updated_at:[null],title:[null,[c.kI.required]],desc:[null],details:[null],img:[null,[c.kI.required]]}),this.id&&this.getDetails(+this.id)}getDetails(s){var o=this;return(0,A.Z)(function*(){o.isLoading=!0;const{data:p,error:m}=yield o.supabase.get("solutions",s,!0);m&&o.message.error(m.message),console.log(p),o.form.setValue({...p}),o.desc=p.desc,o.details=p.details,o.isLoading=!1})()}goBack(){this.router.navigateByUrl("solutions")}submitForm(){var s=this;return(0,A.Z)(function*(){if(s.form.valid){console.log(s.form.value),s.form.value.desc=s.desc,s.form.value.details=s.details;const{error:o}=yield s.supabase.upsert("solutions",s.form.value);o?s.message.error(o.message):(s.message.success("Success"),s.goBack())}else Object.values(s.form.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})})()}uploadImages(s){var o=this;return(0,A.Z)(function*(){const p=s.name.split(".").pop(),m=`${Math.random()}.${p}`;o.isImgLoading=!0;const{error:C}=yield o.supabase.uploadImages(m,s);C&&o.message.error(C.message),o.form.value.img=`${B.N.storageUrl}${m}`,o.form.setValue({...o.form.value}),o.isImgLoading=!1})()}uploadImagesSec(s){var o=this;return(0,A.Z)(function*(){const p=s.name.split(".").pop(),m=`${Math.random()}.${p}`;o.loading=!0;const{error:C}=yield o.supabase.uploadImages(m,s);C&&o.message.error(C.message),o.avatarUrl=`${B.N.storageUrl}${m}`,o.loading=!1})()}}return r.\u0275fac=function(s){return new(s||r)(n.Y36(t.F0),n.Y36(t.gz),n.Y36(S.T),n.Y36(f.dD),n.Y36(c.QS))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-edit-solution"]],decls:41,vars:33,consts:[[3,"nzSpinning"],[1,"header-wrap"],[1,"header-title"],["nz-button","","nzType","primary",1,"header-button",3,"click"],[1,"content-wrap"],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","title","id","title"],["nzRequired","","nzFor","desc",3,"nzSm","nzXs"],["nzHeader","\u5c55\u958b\u3057\u307e\u3059","nzActive","false"],[2,"line-height","1.5 !important",3,"content","contentChange"],["nzRequired","","nzFor","details",3,"nzSm","nzXs"],["nzListType","picture-card",1,"uploader",3,"nzShowUploadList","nzAccept","nzTransformFile"],[4,"ngIf"],["style","width: 100%",3,"src",4,"ngIf"],["nzRequired","","nzFor","img",3,"nzSm","nzXs"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"nzLoading"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"ant-upload-text"],[2,"width","100%",3,"src"]],template:function(s,o){1&s&&(n.TgZ(0,"nz-spin",0)(1,"div",1),n._UZ(2,"div",2),n.TgZ(3,"button",3),n.NdJ("click",function(){return o.goBack()}),n._uU(4,"\u623b\u3063\u3066"),n.qZA()(),n._UZ(5,"nz-divider"),n.TgZ(6,"div",4)(7,"form",5),n.NdJ("ngSubmit",function(){return o.submitForm()}),n.TgZ(8,"nz-form-item")(9,"nz-form-label",6),n._uU(10,"Title"),n.qZA(),n.TgZ(11,"nz-form-control",7),n._UZ(12,"input",8),n.qZA()(),n.TgZ(13,"nz-form-item")(14,"nz-form-label",9),n._uU(15,"Description"),n.qZA(),n.TgZ(16,"nz-form-control",7)(17,"nz-collapse")(18,"nz-collapse-panel",10)(19,"app-content-editor",11),n.NdJ("contentChange",function(m){return o.desc=m}),n.qZA()()()()(),n.TgZ(20,"nz-form-item")(21,"nz-form-label",12),n._uU(22,"Details Content"),n.qZA(),n.TgZ(23,"nz-form-control")(24,"nz-collapse")(25,"nz-collapse-panel",10)(26,"nz-upload",13),n.YNc(27,Y,4,1,"ng-container",14),n.YNc(28,H,1,1,"img",15),n.qZA(),n.TgZ(29,"app-content-editor",11),n.NdJ("contentChange",function(m){return o.details=m}),n.qZA()()()()(),n.TgZ(30,"nz-form-item")(31,"nz-form-label",16),n._uU(32,"Image"),n.qZA(),n.TgZ(33,"nz-form-control",7)(34,"nz-upload",13),n.YNc(35,b,4,1,"ng-container",14),n.YNc(36,K,1,1,"img",15),n.qZA()()(),n.TgZ(37,"nz-form-item",17)(38,"nz-form-control",18)(39,"button",19),n._uU(40,"\u4fdd\u5b58"),n.qZA()()()()()()),2&s&&(n.Q6J("nzSpinning",o.isLoading),n.xp6(7),n.Q6J("formGroup",o.form),n.xp6(2),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(3),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(3),n.Q6J("content",o.desc),n.xp6(2),n.Q6J("nzSm",4)("nzXs",24),n.xp6(5),n.Q6J("nzShowUploadList",!1)("nzAccept",n.DdM(31,$))("nzTransformFile",o.transformFileSec),n.xp6(1),n.Q6J("ngIf",!o.avatarUrl),n.xp6(1),n.Q6J("ngIf",o.avatarUrl),n.xp6(1),n.Q6J("content",o.details),n.xp6(2),n.Q6J("nzSm",4)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(1),n.Q6J("nzShowUploadList",!1)("nzAccept",n.DdM(32,$))("nzTransformFile",o.transformFile),n.xp6(1),n.Q6J("ngIf",!o.form.value.img),n.xp6(1),n.Q6J("ngIf",o.form.value.img),n.xp6(2),n.Q6J("nzSpan",14)("nzOffset",6),n.xp6(1),n.Q6J("nzLoading",o.isLoading||o.isImgLoading))},dependencies:[g.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,x.Zp,y.ix,F.w,J.dQ,T.g,P.W,L.t3,L.SK,v.Lr,v.Nx,v.iK,v.Fd,Q.Ls,R.FY,w.F,M.Zv,M.yH],styles:[".header-wrap[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:18px;display:inline-block}.header-wrap[_ngcontent-%COMP%]   .header-button[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]     .uploader>.ant-upload{width:128px;height:128px}"]}),r})()}];let e=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[t.Bz.forChild(d),t.Bz]}),r})();var l=i(3174),h=i(4233);let O=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[g.ez,e,c.UX,x.o7,y.sL,T.S,l.HQ,P.j,v.U5,Q.PV,R.cS,h.m,M.cD]}),r})()},8942:(j,N,i)=>{i.d(N,{Zv:()=>K,cD:()=>$,yH:()=>H});var g=i(7582),t=i(2223),A=i(4968),c=i(2722),U=i(9300),B=i(7169),n=i(9436),S=i(8982),f=i(4780),x=i(8930),y=i(6760),F=i(4755),J=i(2701),T=i(2643);const P=["*"],L=["collapseHeader"];function v(a,d){if(1&a&&(t.ynx(0),t._UZ(1,"span",7),t.BQk()),2&a){const e=d.$implicit,l=t.oxw(2);t.xp6(1),t.Q6J("nzType",e||"right")("nzRotate",l.nzActive?90:0)}}function Q(a,d){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,v,2,2,"ng-container",3),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzExpandedIcon)}}function R(a,d){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.nzHeader)}}function w(a,d){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.nzExtra)}}function M(a,d){if(1&a&&(t.TgZ(0,"div",8),t.YNc(1,w,2,1,"ng-container",3),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzExtra)}}const Y="collapse";let H=(()=>{class a{constructor(e,l,h,O){this.nzConfigService=e,this.cdr=l,this.directionality=h,this.destroy$=O,this._nzModuleName=Y,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(Y).pipe((0,c.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,c.R)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(e){this.listOfNzCollapsePanelComponent.push(e)}removePanel(e){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(e),1)}click(e){this.nzAccordion&&!e.nzActive&&this.listOfNzCollapsePanelComponent.filter(l=>l!==e).forEach(l=>{l.nzActive&&(l.nzActive=!1,l.nzActiveChange.emit(l.nzActive),l.markForCheck())}),e.nzActive=!e.nzActive,e.nzActiveChange.emit(e.nzActive)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.jY),t.Y36(t.sBO),t.Y36(x.Is,8),t.Y36(S.kn))},a.\u0275cmp=t.Xpm({type:a,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(e,l){2&e&&t.ekj("ant-collapse-icon-position-left","left"===l.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===l.nzExpandIconPosition)("ant-collapse-ghost",l.nzGhost)("ant-collapse-borderless",!l.nzBordered)("ant-collapse-rtl","rtl"===l.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[t._Bn([S.kn])],ngContentSelectors:P,decls:1,vars:0,template:function(e,l){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),(0,g.gn)([(0,n.oS)(),(0,f.yF)()],a.prototype,"nzAccordion",void 0),(0,g.gn)([(0,n.oS)(),(0,f.yF)()],a.prototype,"nzBordered",void 0),(0,g.gn)([(0,n.oS)(),(0,f.yF)()],a.prototype,"nzGhost",void 0),a})();const b="collapsePanel";let K=(()=>{class a{markForCheck(){this.cdr.markForCheck()}constructor(e,l,h,O,r,z){this.nzConfigService=e,this.ngZone=l,this.cdr=h,this.destroy$=O,this.nzCollapseComponent=r,this.noAnimation=z,this._nzModuleName=b,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new t.vpe,this.nzConfigService.getConfigChangeEventForComponent(b).pipe((0,c.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,A.R)(this.collapseHeader.nativeElement,"click").pipe((0,U.h)(()=>!this.nzDisabled),(0,c.R)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.jY),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(S.kn),t.Y36(H,1),t.Y36(y.P,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["nz-collapse-panel"]],viewQuery:function(e,l){if(1&e&&t.Gf(L,7),2&e){let h;t.iGM(h=t.CRH())&&(l.collapseHeader=h.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(e,l){2&e&&t.ekj("ant-collapse-no-arrow",!l.nzShowArrow)("ant-collapse-item-active",l.nzActive)("ant-collapse-item-disabled",l.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[t._Bn([S.kn])],ngContentSelectors:P,decls:8,vars:8,consts:[["role","button",1,"ant-collapse-header"],["collapseHeader",""],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(e,l){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.YNc(2,Q,2,1,"div",2),t.YNc(3,R,2,1,"ng-container",3),t.YNc(4,M,2,1,"div",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6),t.Hsn(7),t.qZA()()),2&e&&(t.uIk("aria-expanded",l.nzActive),t.xp6(2),t.Q6J("ngIf",l.nzShowArrow),t.xp6(1),t.Q6J("nzStringTemplateOutlet",l.nzHeader),t.xp6(1),t.Q6J("ngIf",l.nzExtra),t.xp6(1),t.ekj("ant-collapse-content-active",l.nzActive),t.Q6J("@.disabled",!(null==l.noAnimation||!l.noAnimation.nzNoAnimation))("@collapseMotion",l.nzActive?"expanded":"hidden"))},dependencies:[F.O5,J.Ls,T.f],encapsulation:2,data:{animation:[B.J_]},changeDetection:0}),(0,g.gn)([(0,f.yF)()],a.prototype,"nzActive",void 0),(0,g.gn)([(0,f.yF)()],a.prototype,"nzDisabled",void 0),(0,g.gn)([(0,n.oS)(),(0,f.yF)()],a.prototype,"nzShowArrow",void 0),a})(),$=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[x.vT,F.ez,J.PV,T.T,y.g]}),a})()}}]);