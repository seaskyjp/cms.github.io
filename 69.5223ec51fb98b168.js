"use strict";(self.webpackChunkseaskyCMS=self.webpackChunkseaskyCMS||[]).push([[69],{1069:(x,d,r)=>{r.r(d),r.d(d,{LoginModule:()=>Z});var h=r(4755),i=r(5030),u=r(1195),f=r(5861),n=r(2223),z=r(131),y=r(3272),p=r(1401),L=r(2242),C=r(4247),c=r(1929),l=r(4701),g=r(8397);const F=[{path:"",component:(()=>{class o{constructor(t,e,s,m){this.fb=t,this.supabase=e,this.router=s,this.message=m,this.isLoading=!1}ngOnInit(){this.validateForm=this.fb.group({email:[null,[i.kI.email,i.kI.required]],password:[null,[i.kI.required]]})}signIn(t,e){var s=this;return(0,f.Z)(function*(){s.isLoading=!0;const{data:m,error:v}=yield s.supabase.signIn(t,e);if(v&&s.message.error(v.message),m){const T={access_token:m.session?.access_token,refresh_token:m.session?.refresh_token};yield s.supabase.setSession(T),s.router.navigateByUrl("home")}s.isLoading=!1})()}submitForm(){var t=this;return(0,f.Z)(function*(){t.validateForm.valid?yield t.signIn(t.validateForm.value.email,t.validateForm.value.password):Object.values(t.validateForm.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})})()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(i.QS),n.Y36(z.T),n.Y36(u.F0),n.Y36(y.dD))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],decls:14,vars:3,consts:[[1,"form-wrap"],[1,"title"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","Please input your email!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","email","placeholder","Email"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","nzLoading"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1),n._uU(2,"\u767b\u5f55"),n.qZA(),n.TgZ(3,"form",2),n.NdJ("ngSubmit",function(){return e.submitForm()}),n.TgZ(4,"nz-form-item")(5,"nz-form-control",3)(6,"nz-input-group",4),n._UZ(7,"input",5),n.qZA()()(),n.TgZ(8,"nz-form-item")(9,"nz-form-control",6)(10,"nz-input-group",7),n._UZ(11,"input",8),n.qZA()()(),n.TgZ(12,"button",9),n._uU(13," Log in "),n.qZA()()()),2&t&&(n.xp6(3),n.Q6J("formGroup",e.validateForm),n.xp6(9),n.Q6J("nzType","primary")("nzLoading",e.isLoading))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,p.ix,L.w,C.dQ,c.t3,c.SK,l.Lr,l.Nx,l.Fd,g.Zp,g.gB],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;min-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-button[_ngcontent-%COMP%]{width:100%}.form-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh;padding-bottom:20vh;flex-direction:column}.form-wrap[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:24px;font-size:20px}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[u.Bz.forChild(F),u.Bz]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[h.ez,i.UX,p.sL,M,l.U5,g.o7]}),o})()}}]);